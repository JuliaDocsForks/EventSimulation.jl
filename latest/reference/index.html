<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Bogumił Kamiński">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Reference - EventSimulation.jl</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../assets/Documenter.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Reference";
    var mkdocs_page_input_path = "reference.md";
    var mkdocs_page_url = "/reference/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> EventSimulation.jl</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../tutorial/">Tutorial</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Reference</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#eventsimulation-reference">EventSimulation Reference</a></li>
    

    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">EventSimulation.jl</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Reference</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/bkamins/EventSimulation.jl/edit/master/docs/reference.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><a id='reference-1'></a></p>
<h1 id="eventsimulation-reference">EventSimulation Reference</h1>
<p><a id='EventSimulation' href='#EventSimulation'>#</a>
<strong><code>EventSimulation</code></strong> &mdash; <em>Module</em>.</p>
<p>EventSimulation is an event-based discrete event simulation engine.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/EventSimulation.jl#L3-L5' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.Action' href='#EventSimulation.Action'>#</a>
<strong><code>EventSimulation.Action</code></strong> &mdash; <em>Type</em>.</p>
<p>Structure holding an information that <code>what</code> should be executed by scheduler at time <code>when</code>; <code>what</code> should accept one argument of type <code>Scheduler</code>.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L1-L5' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.AbstractState' href='#EventSimulation.AbstractState'>#</a>
<strong><code>EventSimulation.AbstractState</code></strong> &mdash; <em>Type</em>.</p>
<p>Abstract type for holding state of the simulation</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L62-L64' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.EmptyState' href='#EventSimulation.EmptyState'>#</a>
<strong><code>EventSimulation.EmptyState</code></strong> &mdash; <em>Type</em>.</p>
<p>Simplest concrete type implementing <code>AbstractState</code> that does not hold any data</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L67-L70' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.Scheduler' href='#EventSimulation.Scheduler'>#</a>
<strong><code>EventSimulation.Scheduler</code></strong> &mdash; <em>Type</em>.</p>
<p>Holds information about current simulation state Contains the following fields:</p>
<ul>
<li><code>now</code>         current simulation time</li>
<li><code>event_queue</code> priority queue of <code>Actions</code> planned to be executed</li>
<li><code>state</code>       user defined subtype of <code>AbstractState</code> of the simulation</li>
<li><code>monitor</code>     function that is called before event is triggered               must accept two arguments <code>Scheduler</code> and <code>Δ</code>, a difference               between time of event to be executed and time of last executed event</li>
</ul>
<p>If two <code>Action</code>s have identical <code>when</code> time in <code>event_queue</code> then the order of their execution is undefined</p>
<p>When <code>monitor</code> is executed the event to happen is still on <code>event_queue</code>, but time is updated to time when the event is to be executed (i.e. <code>monitor</code> sees the state of the simulation just before the event is triggered). Therefore for calculating summary statistics <code>monitor</code> may assume that the simulation spent <code>Δ</code> time in this state. Function <code>monitor</code> should not modify <code>event_queue[1]</code> as EventSimulation assumes that the event to be triggered after <code>monitor</code> executes will not be modified. Additionally it it not guaranteed that <code>event_queue[1]</code> will be executed after <code>monitor</code> finishes because simulation might terminate earlier.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L74-L96' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.register!' href='#EventSimulation.register!'>#</a>
<strong><code>EventSimulation.register!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>register!(s, what, Δ)
</code></pre>

<p>Put <code>what</code> at time <code>s.now+Δ</code> to <code>s.event_queue</code>. <code>what</code> must accept exactly one argument of type <code>Scheduler</code>. The function does not check if <code>Δ</code> is a valid (finite) number. Returns inserted <code>Action</code>.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L124-L131' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.repeat_register!' href='#EventSimulation.repeat_register!'>#</a>
<strong><code>EventSimulation.repeat_register!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>repeat_register!(s, what, interval)
</code></pre>

<p>Put <code>what</code> to <code>s.event_queue</code> repeatedly in time intervals specified by <code>interval</code> function, which must accept one argument of type <code>Scheduler</code>. <code>what</code> must accept exactly one argument of type <code>Scheduler</code>. <code>interval</code> function is called after the previous event was executed. Returns <code>nothing</code>. Calling <code>terminate!</code> in function <code>interval</code> will not stop the simulation. Instead, if <code>interval</code> returns interval that is not finite the action is not scheduled and <code>repeat_register</code> will effectively terminate.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L138-L149' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.bulk_register!' href='#EventSimulation.bulk_register!'>#</a>
<strong><code>EventSimulation.bulk_register!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>bulk_register!(s, who, what, Δ, randomize)
</code></pre>

<p>Put event at time <code>s.now+Δ</code> to <code>s.event_queue</code> that will execute <code>what(scheduler, w)</code> for all <code>w</code> in <code>who</code>. If <code>randomize</code> is <code>false</code> then <code>who</code> is traversed in natural order otherwise it is traversed in random order. <code>what</code> must accept exactly two arguments of type <code>Scheduler</code> and <code>typeof(who)</code>. The function does not check if <code>Δ</code> is a valid (finite) number. Returns inserted bulk <code>Action</code>.</p>
<p>Function is designed to efficiently handle case when the same action has to be executed at the same simulation time by many agents.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L161-L174' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.repeat_bulk_register!' href='#EventSimulation.repeat_bulk_register!'>#</a>
<strong><code>EventSimulation.repeat_bulk_register!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>repeat_bulk_register!(s, who, what, interval, randomize)
</code></pre>

<p>Repeat <code>bulk_register!</code> at time intervals specified by <code>interval</code> function, which must accept <code>Scheduler</code> argument. <code>interval</code> function is called after the previous event was executed. <code>what</code> must accept exactly two arguments of type <code>Scheduler</code> and <code>typeof(who)</code>. Returns <code>nothing</code>. Calling <code>terminate!</code> in function <code>interval</code> will not stop the simulation. Instead, if <code>interval</code> returns interval that is not finite the action is not scheduled and <code>repeat_bulk_register</code> will effectively terminate.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L192-L203' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.interrupt!' href='#EventSimulation.interrupt!'>#</a>
<strong><code>EventSimulation.interrupt!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>interrupt!(s, a)
</code></pre>

<p>First occurrence of action <code>a</code> is replaced by no-op in event queue. This way there is no need to fix heap in this operation and it is fast. Returns <code>true</code> if <code>a</code> was found in queue and <code>false</code> otherwise.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L224-L230' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.terminate!' href='#EventSimulation.terminate!'>#</a>
<strong><code>EventSimulation.terminate!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>terminate!(s)
</code></pre>

<p>Empties <code>s.event_queue</code> which will lead to termination of simulation unless it is refilled before execution returns to <code>go!</code>. Useful for event-triggered termination of simulation.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L238-L244' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.go!' href='#EventSimulation.go!'>#</a>
<strong><code>EventSimulation.go!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>go!(s, until)
</code></pre>

<p>Runs simulation defined by <code>s</code> until <code>s.now</code> is greater or equal than <code>until</code> or <code>s.event_queue</code> is empty (i.e. nothing is left to be done). By default <code>until</code> equals <code>Inf</code>.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/core.jl#L249-L255' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.AbstractReservoir' href='#EventSimulation.AbstractReservoir'>#</a>
<strong><code>EventSimulation.AbstractReservoir</code></strong> &mdash; <em>Type</em>.</p>
<p>Abstract class for reservoirs. <code>SimQueue</code> and <code>SimResource</code> are concrete types implementing it.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/EventSimulation.jl#L25-L28' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.SimResource' href='#EventSimulation.SimResource'>#</a>
<strong><code>EventSimulation.SimResource</code></strong> &mdash; <em>Type</em>.</p>
<p>Resource type for holding numeric values (like amount of liquid). It stores current <code>quantity</code> of matter and its allowed <code>lo</code> and <code>hi</code> amounts. Servers can get matter from the resource with optional maximum number of requests pending for fulfillment.</p>
<p>Fields:</p>
<ul>
<li><code>quantity</code>       current quantity in resource</li>
<li><code>lo</code>            minimum quantity of resource</li>
<li><code>hi</code>            maximum quantity of resource</li>
<li><code>fifo_requests</code> if <code>true</code> <code>requests</code> is FIFO, otherwise LIFO</li>
<li><code>max_requests</code>  maximum <code>requests</code> size</li>
<li><code>requests</code>      vector of request and requested quantity</li>
</ul>
<p>Functions in <code>requests</code> must accept one argument <code>Scheduler</code>, so they should know the amount they requested. When resource arrives to a queue there is a try to immediately dispatch it to pending requests. When new request arrives there is a try to immediately fulfill it.</p>
<p>Initially an empty <code>SimResource</code> with no requests is constructed. Initial <code>quantity</code>, <code>lo</code> and <code>hi</code> may be provided. By default <code>SimResource</code> is empty, and has minimum quantity of zero and unbounded maximum.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/resource.jl#L9-L31' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.ResourceRequest' href='#EventSimulation.ResourceRequest'>#</a>
<strong><code>EventSimulation.ResourceRequest</code></strong> &mdash; <em>Type</em>.</p>
<p>Internal structure that remembers that <code>quantity</code> was requested by <code>request</code>.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/resource.jl#L1-L3' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.SimQueue' href='#EventSimulation.SimQueue'>#</a>
<strong><code>EventSimulation.SimQueue</code></strong> &mdash; <em>Type</em>.</p>
<p>SimQueue type for holding arbitrary objects <code>O</code>. It allows objects to be waiting in a queue with optional maximum queue size. Servers can get objects from the queue with optional maximum number of requests pending for fulfillment.</p>
<p>Fields:</p>
<ul>
<li><code>fifo_queue</code>    if <code>true</code> <code>queue</code> is FIFO, otherwise LIFO</li>
<li><code>max_queue</code>     maximum <code>queue</code> size</li>
<li><code>queue</code>         vector of objects in a queue</li>
<li><code>fifo_requests</code> if <code>true</code> <code>requests</code> is FIFO, otherwise LIFO</li>
<li><code>max_requests</code>  maximum <code>requests</code> size</li>
<li><code>requests</code>      vector of request functions</li>
</ul>
<p>Functions in <code>requests</code> must accept two arguments <code>Scheduler</code> and <code>O</code>. When <code>O</code> arrives to a queue there is a try to immediately feed it to pending requests. When new request arrives there is a try to immediately provide it with <code>O</code>.</p>
<p>Initially an empty <code>SimQueue</code> with no requests is constructed. By default <code>queue</code> and <code>requests</code> have FIFO policy and are unbounded.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/queue.jl#L1-L20' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.request!' href='#EventSimulation.request!'>#</a>
<strong><code>EventSimulation.request!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>request!(s, r, quantity, request)
request!(s, q, request)
</code></pre>

<p>Function used to register request for resource in <code>SimResource</code> or object from <code>SimQueue</code>.</p>
<p>In <code>SimResource</code> requested <code>quantity</code> must be provided and <code>request</code> accepts only <code>Scheduler</code> argument (it must know what it wanted). Returns tuple of:</p>
<ul>
<li><code>true</code> if successfull and <code>false</code> when too many requests were made</li>
<li><code>ResourceRequest</code> object created</li>
</ul>
<p>In <code>SimResource</code> function <code>request</code> must accept one argument <code>Scheduler</code>. In <code>SimQueue</code> function <code>request</code> must accept two arguments <code>Scheduler</code> and object.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/EventSimulation.jl#L40-L56' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.waive!' href='#EventSimulation.waive!'>#</a>
<strong><code>EventSimulation.waive!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>waive!(r, res_request)
waive!(q, request)
</code></pre>

<p>Allows to remove first occurence that would be served of <code>res_request</code> from <code>SimResource</code> or <code>request</code> from <code>SimQueue</code>.</p>
<p>Returns <code>true</code> on success and <code>false</code> if <code>res_request</code> or <code>request</code> respectively was not found.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/EventSimulation.jl#L59-L68' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.provide!' href='#EventSimulation.provide!'>#</a>
<strong><code>EventSimulation.provide!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>provide!(s, r, quantity)
provide!(s, q, object)
</code></pre>

<p>Allows to fill <code>SimResource</code> with <code>quantity</code> or <code>SimQueue</code> with <code>object</code>.</p>
<p>In <code>SimResource</code> changes the balance of <code>r.quantity</code>. Given quantity may be any number, but the balance of <code>SimResource</code> will be changed only in <code>lo</code>-<code>hi</code> range. Returns the actual change in <code>SimResource</code> balance.</p>
<p>In <code>SimQueue</code> adds <code>object</code> to <code>q.queue</code>. Returns <code>true</code> on success and <code>false</code> if there were too many objects in queue already.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/EventSimulation.jl#L71-L83' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.withdraw!' href='#EventSimulation.withdraw!'>#</a>
<strong><code>EventSimulation.withdraw!</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>withdraw!(q, object)
</code></pre>

<p>Allows to remove first occurrence that would be served of <code>object</code> from <code>SimQueue</code>.</p>
<p>Returns <code>true</code> on success and <code>false</code> if <code>object</code> was not found.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/queue.jl#L74-L80' class='documenter-source'>source</a><br></p>
<p><a id='EventSimulation.PriorityTime' href='#EventSimulation.PriorityTime'>#</a>
<strong><code>EventSimulation.PriorityTime</code></strong> &mdash; <em>Type</em>.</p>
<p>Subtype of <code>Real</code> defining a lexicographically comparable pair of <code>Real</code>. It is designed to be used by <code>Scheduler</code> where standard real numbers run to a problem of undefined order of undefined order of removal from priority queue.</p>
<p><code>PriorityTime</code> two fields <code>time</code> and <code>priority</code> may have different types, but both have to be subtypes of <code>Real</code>. <code>priority</code> should be used to determine order of execution of <code>Action</code>s that have the same time. Two actions with identical <code>time</code> and <code>priority</code> have undefined oreder of execution so this should be avoided.</p>
<p><code>PriorityTime</code> type has defined lexicographic order and <code>+</code>, <code>-</code>. It is immutable, has a custom <code>hash</code> function and conversions from <code>Real</code> types.</p>
<p><a target='_blank' href='https://github.com/bkamins/EventSimulation.jl/tree/8251aa627e029b9fec539f93853ac8cba6fc4dfa/src/prioritytime.jl#L3-L16' class='documenter-source'>source</a><br></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../tutorial/" class="btn btn-neutral" title="Tutorial"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/bkamins/EventSimulation.jl" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../tutorial/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../assets/mathjaxhelper.js"></script>

</body>
</html>
